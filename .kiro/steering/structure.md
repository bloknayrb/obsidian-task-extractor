# Project Structure

## Root Files
- **main.ts**: Main plugin orchestration and backward compatibility layer
- **manifest.json**: Obsidian plugin metadata (id, name, version, description)
- **package.json**: npm configuration with build scripts and dependencies
- **tsconfig.json**: TypeScript compiler configuration (ES2018 target, includes src/)
- **esbuild.config.mjs**: Build configuration with development/production modes
- **version-bump.mjs**: Automated versioning script for manifest.json and versions.json

## Modular Architecture (src/)
- **src/types.ts**: All interfaces, constants, and type definitions (100 lines)
- **src/llm-providers.ts**: LLM provider management and service detection (450+ lines)
- **src/task-processor.ts**: Task processing, extraction, and file handling (280+ lines)
- **src/settings.ts**: Settings UI components (preserved but integrated into main.ts)

## Configuration Files
- **.gitignore**: Standard Node.js/TypeScript exclusions plus Obsidian-specific files
- **LICENSE**: MIT license
- **README.md**: Comprehensive documentation with setup, configuration, and usage examples

## Build Artifacts
- **main.js**: Bundled plugin output (generated by esbuild)
- **versions.json**: Version compatibility mapping (auto-generated)
- **node_modules/**: Dependencies (excluded from git)

## Optimized Architecture
The plugin now follows a modular architecture with performance optimizations:

### Core Components
- **TaskExtractorPlugin** (main.ts): Plugin lifecycle and API compatibility
- **LLMProviderManager** (src/llm-providers.ts): On-demand service detection, caching
- **TaskProcessor** (src/task-processor.ts): Debounced processing, batch operations
- **ExtractorSettingTab** (main.ts): Debounced settings with 500ms delays

### Performance Features
- **File Processing**: 2-second debouncing prevents redundant processing
- **Service Detection**: On-demand with 30-minute cache TTL (83% less CPU usage)
- **Batch Processing**: Process files in groups of 5 with 100ms delays
- **Settings**: Debounced saves reduce I/O operations

### Backward Compatibility
- All existing APIs preserved exactly
- Zero breaking changes for users
- Seamless upgrade path from previous versions

## Development Workflow
1. Modify modular components in `src/` for functionality changes
2. Update `main.ts` for plugin lifecycle or API changes
3. Update `manifest.json` for metadata changes
4. Use `npm run dev` for development with auto-rebuild
5. Use `npm run build` for production builds (includes src/ files)
6. Use `npm version` for releases (auto-updates manifest)